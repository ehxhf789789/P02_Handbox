{
  "id": "cnt-phase4-pattern-analysis",
  "name": "[Phase 4] 패턴 분석",
  "description": "기술 분야별/연도별 통과율 패턴 → 경향성 분석 및 시각화",
  "category": "CNT 평가 연구",
  "nodes": [
    {
      "id": "node_1",
      "type": "local-file",
      "position": { "x": 0, "y": 150 },
      "data": {
        "label": "평가 결과 DB",
        "color": "#6366f1",
        "description": "전체 평가 결과 데이터",
        "config": { "file_filter": "*.xlsx;*.json" }
      }
    },
    {
      "id": "node_2",
      "type": "custom-agent",
      "position": { "x": 200, "y": 50 },
      "data": {
        "label": "분야별 분석",
        "color": "#8b5cf6",
        "description": "기술 분야별 통과율",
        "config": {
          "agent_type": "field_analyzer",
          "system_prompt": "기술 분야별 평가 결과 패턴을 분석합니다.\n\n## 분석 대상 분야\n1. 토목 (교량, 터널, 도로, 하천)\n2. 건축 (구조, 설비, 마감, 단열)\n3. 설비 (기계, 전기, 통신, 소방)\n4. 환경 (수처리, 대기, 폐기물, 소음)\n5. 기타 (재료, 공법, 장비, 소프트웨어)\n\n## 출력 형식\n{\n  \"field_statistics\": {\n    \"civil_engineering\": {\n      \"total\": 0,\n      \"passed\": 0,\n      \"pass_rate\": 0.00,\n      \"common_failure_reasons\": [...]\n    },\n    ...\n  },\n  \"high_pass_rate_fields\": [...],\n  \"low_pass_rate_fields\": [...],\n  \"field_specific_patterns\": [...]\n}"
        }
      }
    },
    {
      "id": "node_3",
      "type": "custom-agent",
      "position": { "x": 200, "y": 150 },
      "data": {
        "label": "연도별 분석",
        "color": "#a855f7",
        "description": "연도별 통과율 추이",
        "config": {
          "agent_type": "yearly_analyzer",
          "system_prompt": "연도별 평가 결과 추이를 분석합니다.\n\n## 분석 항목\n1. 연도별 신청 건수 추이\n2. 연도별 통과율 변화\n3. 연도별 주요 기술 트렌드\n4. 심사 기준 변화 감지\n\n## 출력 형식\n{\n  \"yearly_statistics\": {\n    \"2020\": { \"total\": 0, \"passed\": 0, \"pass_rate\": 0.00 },\n    \"2021\": { ... },\n    ...\n  },\n  \"trend_analysis\": {\n    \"application_trend\": \"증가/감소/유지\",\n    \"pass_rate_trend\": \"증가/감소/유지\",\n    \"significant_changes\": [...]\n  },\n  \"technology_trends\": {\n    \"emerging_fields\": [...],\n    \"declining_fields\": [...]\n  }\n}"
        }
      }
    },
    {
      "id": "node_4",
      "type": "custom-agent",
      "position": { "x": 200, "y": 250 },
      "data": {
        "label": "실패 원인 분석",
        "color": "#c084fc",
        "description": "탈락 사유 패턴 분석",
        "config": {
          "agent_type": "failure_pattern_analyzer",
          "system_prompt": "탈락 사유 패턴을 분석합니다.\n\n## 분석 항목\n1. 항목별 탈락 비율\n   - 신규성 미충족 비율\n   - 진보성 미충족 비율\n   - 현장적용성 미충족 비율\n   - 경제성 미충족 비율\n\n2. 복합 탈락 패턴\n   - 단일 항목 미충족\n   - 2개 항목 미충족\n   - 3개 이상 항목 미충족\n\n## 출력 형식\n{\n  \"failure_by_criteria\": {\n    \"novelty\": { \"count\": 0, \"rate\": 0.00 },\n    \"inventiveness\": { \"count\": 0, \"rate\": 0.00 },\n    \"applicability\": { \"count\": 0, \"rate\": 0.00 },\n    \"economy\": { \"count\": 0, \"rate\": 0.00 }\n  },\n  \"common_failure_combinations\": [...],\n  \"improvement_suggestions\": [...]\n}"
        }
      }
    },
    {
      "id": "node_5",
      "type": "merge",
      "position": { "x": 450, "y": 150 },
      "data": {
        "label": "패턴 통합",
        "color": "#f97316",
        "description": "분석 결과 병합",
        "config": {}
      }
    },
    {
      "id": "node_6",
      "type": "custom-agent",
      "position": { "x": 650, "y": 150 },
      "data": {
        "label": "종합 리포트",
        "color": "#f97316",
        "description": "패턴 분석 종합",
        "config": {
          "agent_type": "pattern_synthesizer",
          "system_prompt": "분야별, 연도별, 실패 원인 분석을 종합하여 인사이트를 도출합니다.\n\n## 종합 분석\n1. 핵심 발견사항 (Key Findings)\n2. 성공 요인 분석\n3. 실패 요인 분석\n4. AI 평가 시스템 개선점\n5. 신청자 가이드라인 제안\n\n## 출력 형식\n{\n  \"executive_summary\": \"...\",\n  \"key_findings\": [...],\n  \"success_factors\": [...],\n  \"failure_factors\": [...],\n  \"system_improvements\": [...],\n  \"applicant_guidelines\": [...],\n  \"future_research_directions\": [...]\n}"
        }
      }
    },
    {
      "id": "node_7",
      "type": "viz-json-viewer",
      "position": { "x": 850, "y": 50 },
      "data": {
        "label": "패턴 시각화",
        "color": "#22c55e",
        "description": "차트 및 그래프",
        "config": {}
      }
    },
    {
      "id": "node_8",
      "type": "export-excel",
      "position": { "x": 850, "y": 150 },
      "data": {
        "label": "패턴 리포트",
        "color": "#22c55e",
        "description": "패턴 분석 결과 저장",
        "config": {
          "output_path": "./output/pattern_analysis_report.xlsx",
          "sheet_name": "Pattern_Analysis"
        }
      }
    },
    {
      "id": "node_9",
      "type": "export-pdf",
      "position": { "x": 850, "y": 250 },
      "data": {
        "label": "연구 보고서",
        "color": "#22c55e",
        "description": "최종 연구 리포트 PDF",
        "config": {
          "output_path": "./output/cnt_research_report.pdf",
          "title": "건설신기술 AI 평가 패턴 분석 보고서"
        }
      }
    }
  ],
  "edges": [
    { "id": "edge_1", "source": "node_1", "target": "node_2" },
    { "id": "edge_2", "source": "node_1", "target": "node_3" },
    { "id": "edge_3", "source": "node_1", "target": "node_4" },
    { "id": "edge_4", "source": "node_2", "target": "node_5" },
    { "id": "edge_5", "source": "node_3", "target": "node_5" },
    { "id": "edge_6", "source": "node_4", "target": "node_5" },
    { "id": "edge_7", "source": "node_5", "target": "node_6" },
    { "id": "edge_8", "source": "node_6", "target": "node_7" },
    { "id": "edge_9", "source": "node_6", "target": "node_8" },
    { "id": "edge_10", "source": "node_6", "target": "node_9" }
  ],
  "created_at": "2025-02-03T00:00:00.000Z",
  "updated_at": "2025-02-03T00:00:00.000Z"
}
