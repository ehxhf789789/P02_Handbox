{
  "id": "cnt-full-pipeline",
  "name": "[전체] CNT 평가 풀 파이프라인",
  "description": "지식베이스 구축 → 전문가 에이전트 → 위원회 시뮬레이션 → 검증까지 전체 파이프라인",
  "category": "CNT 평가 연구",
  "nodes": [
    {
      "id": "node_kb_1",
      "type": "local-file",
      "position": { "x": 0, "y": 0 },
      "data": {
        "label": "심사 매뉴얼",
        "color": "#ef4444",
        "description": "건설신기술 심사기준",
        "config": { "file_filter": "*.pdf;*.hwp" }
      }
    },
    {
      "id": "node_kb_2",
      "type": "local-file",
      "position": { "x": 0, "y": 75 },
      "data": {
        "label": "판례 DB",
        "color": "#ef4444",
        "description": "과거 심사 사례",
        "config": { "file_filter": "*.xlsx;*.csv" }
      }
    },
    {
      "id": "node_kb_3",
      "type": "kisti-patents",
      "position": { "x": 0, "y": 150 },
      "data": {
        "label": "KISTI 특허",
        "color": "#a855f7",
        "description": "건설 관련 특허 검색",
        "config": { "query": "건설신기술", "row_count": 20 }
      }
    },
    {
      "id": "node_kb_4",
      "type": "local-file",
      "position": { "x": 0, "y": 225 },
      "data": {
        "label": "건설신기술 DB",
        "color": "#f59e0b",
        "description": "기지정 건설신기술 목록 (Excel)",
        "config": { "file_filter": "*.xlsx;*.csv" }
      }
    },
    {
      "id": "node_kb_merge",
      "type": "merge",
      "position": { "x": 200, "y": 100 },
      "data": {
        "label": "KB 통합",
        "color": "#8b5cf6",
        "description": "지식베이스 병합",
        "config": {}
      }
    },
    {
      "id": "node_vectordb",
      "type": "vector-store",
      "position": { "x": 400, "y": 100 },
      "data": {
        "label": "벡터 DB",
        "color": "#6366f1",
        "description": "OpenSearch 임베딩 저장",
        "config": {
          "collection_name": "cnt_knowledge_base",
          "embedding_model": "amazon.titan-embed-text-v2:0"
        }
      }
    },
    {
      "id": "node_input",
      "type": "local-file",
      "position": { "x": 0, "y": 350 },
      "data": {
        "label": "CNT 신청서",
        "color": "#ef4444",
        "description": "평가 대상 신청서",
        "config": { "file_filter": "*.pdf;*.hwp" }
      }
    },
    {
      "id": "node_parser",
      "type": "doc-pdf-parser",
      "position": { "x": 200, "y": 350 },
      "data": {
        "label": "문서 파싱",
        "color": "#ef4444",
        "description": "신청서 텍스트 추출",
        "config": {}
      }
    },
    {
      "id": "node_rag",
      "type": "rag-retriever",
      "position": { "x": 400, "y": 250 },
      "data": {
        "label": "RAG 검색",
        "color": "#6366f1",
        "description": "관련 지식 검색",
        "config": {
          "top_k": 10,
          "similarity_threshold": 0.7
        }
      }
    },
    {
      "id": "node_eval_1",
      "type": "custom-agent",
      "position": { "x": 600, "y": 200 },
      "data": {
        "label": "평가위원 #1",
        "color": "#6366f1",
        "description": "보수적 구조 전문가",
        "config": {
          "agent_id": "evaluator_1",
          "model": "anthropic.claude-3-sonnet-20240229-v1:0",
          "temperature": 0.15,
          "persona": "보수적 관점의 구조 전문가"
        }
      }
    },
    {
      "id": "node_eval_2",
      "type": "custom-agent",
      "position": { "x": 600, "y": 275 },
      "data": {
        "label": "평가위원 #2",
        "color": "#8b5cf6",
        "description": "혁신 시공 전문가",
        "config": {
          "agent_id": "evaluator_2",
          "model": "anthropic.claude-3-sonnet-20240229-v1:0",
          "temperature": 0.2,
          "persona": "혁신 지향의 시공 전문가"
        }
      }
    },
    {
      "id": "node_eval_3",
      "type": "custom-agent",
      "position": { "x": 600, "y": 350 },
      "data": {
        "label": "평가위원 #3",
        "color": "#a855f7",
        "description": "실용성 현장 전문가",
        "config": {
          "agent_id": "evaluator_3",
          "model": "anthropic.claude-3-sonnet-20240229-v1:0",
          "temperature": 0.25,
          "persona": "실용성 중시의 현장 전문가"
        }
      }
    },
    {
      "id": "node_eval_4",
      "type": "custom-agent",
      "position": { "x": 600, "y": 425 },
      "data": {
        "label": "평가위원 #4",
        "color": "#c084fc",
        "description": "경제성 분석 전문가",
        "config": {
          "agent_id": "evaluator_4",
          "model": "anthropic.claude-3-sonnet-20240229-v1:0",
          "temperature": 0.2,
          "persona": "경제성 분석 전문가"
        }
      }
    },
    {
      "id": "node_eval_5",
      "type": "custom-agent",
      "position": { "x": 600, "y": 500 },
      "data": {
        "label": "평가위원 #5",
        "color": "#d8b4fe",
        "description": "특허/선행기술 전문가",
        "config": {
          "agent_id": "evaluator_5",
          "model": "anthropic.claude-3-sonnet-20240229-v1:0",
          "temperature": 0.15,
          "persona": "특허/선행기술 분석 전문가"
        }
      }
    },
    {
      "id": "node_eval_merge",
      "type": "merge",
      "position": { "x": 800, "y": 350 },
      "data": {
        "label": "평가 결과 수집",
        "color": "#c084fc",
        "description": "5개 에이전트 결과 병합",
        "config": {}
      }
    },
    {
      "id": "node_voting",
      "type": "custom-agent",
      "position": { "x": 1000, "y": 350 },
      "data": {
        "label": "투표 집계",
        "color": "#f97316",
        "description": "다수결 판정 (3/5)",
        "config": {
          "agent_type": "voting_aggregator",
          "system_prompt": "5명의 평가위원 결과를 집계합니다. 각 항목별 3명 이상 충족 시 해당 항목 충족. 모든 항목 충족 시 최종 통과."
        }
      }
    },
    {
      "id": "node_ground_truth",
      "type": "local-file",
      "position": { "x": 1000, "y": 500 },
      "data": {
        "label": "실제 심사 결과",
        "color": "#ef4444",
        "description": "Ground Truth 데이터",
        "config": { "file_filter": "*.xlsx" }
      }
    },
    {
      "id": "node_validation",
      "type": "custom-agent",
      "position": { "x": 1200, "y": 400 },
      "data": {
        "label": "정확도 검증",
        "color": "#ec4899",
        "description": "AI vs 실제 비교",
        "config": {
          "agent_type": "accuracy_validator",
          "system_prompt": "AI 판정과 실제 심사 결과를 비교하여 Accuracy, Precision, Recall, F1 Score를 계산합니다."
        }
      }
    },
    {
      "id": "node_result_json",
      "type": "viz-json-viewer",
      "position": { "x": 1400, "y": 300 },
      "data": {
        "label": "결과 시각화",
        "color": "#22c55e",
        "description": "판정 결과 표시",
        "config": {}
      }
    },
    {
      "id": "node_result_excel",
      "type": "export-excel",
      "position": { "x": 1400, "y": 400 },
      "data": {
        "label": "결과 Excel",
        "color": "#22c55e",
        "description": "평가 결과 저장",
        "config": {
          "output_path": "./output/cnt_full_pipeline_results.xlsx",
          "sheet_name": "CNT_Full_Results"
        }
      }
    },
    {
      "id": "node_result_pdf",
      "type": "export-pdf",
      "position": { "x": 1400, "y": 500 },
      "data": {
        "label": "최종 보고서",
        "color": "#22c55e",
        "description": "PDF 리포트 생성",
        "config": {
          "output_path": "./output/cnt_evaluation_report.pdf",
          "title": "건설신기술 AI 평가 보고서"
        }
      }
    }
  ],
  "edges": [
    { "id": "edge_kb_1", "source": "node_kb_1", "target": "node_kb_merge" },
    { "id": "edge_kb_2", "source": "node_kb_2", "target": "node_kb_merge" },
    { "id": "edge_kb_3", "source": "node_kb_3", "target": "node_kb_merge" },
    { "id": "edge_kb_4", "source": "node_kb_4", "target": "node_kb_merge" },
    { "id": "edge_kb_vector", "source": "node_kb_merge", "target": "node_vectordb" },
    { "id": "edge_input_parser", "source": "node_input", "target": "node_parser" },
    { "id": "edge_vector_rag", "source": "node_vectordb", "target": "node_rag" },
    { "id": "edge_parser_rag", "source": "node_parser", "target": "node_rag" },
    { "id": "edge_rag_eval1", "source": "node_rag", "target": "node_eval_1" },
    { "id": "edge_rag_eval2", "source": "node_rag", "target": "node_eval_2" },
    { "id": "edge_rag_eval3", "source": "node_rag", "target": "node_eval_3" },
    { "id": "edge_rag_eval4", "source": "node_rag", "target": "node_eval_4" },
    { "id": "edge_rag_eval5", "source": "node_rag", "target": "node_eval_5" },
    { "id": "edge_eval1_merge", "source": "node_eval_1", "target": "node_eval_merge" },
    { "id": "edge_eval2_merge", "source": "node_eval_2", "target": "node_eval_merge" },
    { "id": "edge_eval3_merge", "source": "node_eval_3", "target": "node_eval_merge" },
    { "id": "edge_eval4_merge", "source": "node_eval_4", "target": "node_eval_merge" },
    { "id": "edge_eval5_merge", "source": "node_eval_5", "target": "node_eval_merge" },
    { "id": "edge_merge_voting", "source": "node_eval_merge", "target": "node_voting" },
    { "id": "edge_voting_validation", "source": "node_voting", "target": "node_validation" },
    { "id": "edge_gt_validation", "source": "node_ground_truth", "target": "node_validation" },
    { "id": "edge_validation_json", "source": "node_validation", "target": "node_result_json" },
    { "id": "edge_validation_excel", "source": "node_validation", "target": "node_result_excel" },
    { "id": "edge_validation_pdf", "source": "node_validation", "target": "node_result_pdf" }
  ],
  "created_at": "2025-02-03T00:00:00.000Z",
  "updated_at": "2025-02-03T00:00:00.000Z"
}
