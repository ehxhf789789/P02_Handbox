{
  "name": "문서 기반 Q&A (RAG) 워크플로우",
  "description": "S3에서 문서를 읽어 Textract로 텍스트 추출 후, Claude로 질문에 답변하는 RAG 파이프라인 예제",
  "nodes": [
    {
      "id": "node_input",
      "type": "input",
      "position": { "x": 50, "y": 200 },
      "data": {
        "label": "입력",
        "color": "#22c55e",
        "description": "시작",
        "useCase": "사용자 질문 입력",
        "config": {
          "inputType": "text",
          "placeholder": "질문을 입력하세요..."
        }
      }
    },
    {
      "id": "node_s3",
      "type": "aws-s3",
      "position": { "x": 50, "y": 50 },
      "data": {
        "label": "S3",
        "color": "#3b82f6",
        "description": "객체 스토리지",
        "useCase": "문서 저장소",
        "config": {
          "bucket": "my-documents-bucket",
          "prefix": "documents/"
        }
      }
    },
    {
      "id": "node_textract",
      "type": "aws-textract",
      "position": { "x": 250, "y": 50 },
      "data": {
        "label": "Textract",
        "color": "#ff9900",
        "description": "OCR/문서 분석",
        "useCase": "PDF 텍스트 추출",
        "config": {
          "featureTypes": ["TABLES", "FORMS"]
        }
      }
    },
    {
      "id": "node_embedder",
      "type": "embedder",
      "position": { "x": 450, "y": 50 },
      "data": {
        "label": "임베딩",
        "color": "#d8b4fe",
        "description": "벡터화",
        "useCase": "문서 임베딩 생성",
        "config": {
          "model": "amazon.titan-embed-text-v2:0"
        }
      }
    },
    {
      "id": "node_opensearch",
      "type": "aws-opensearch",
      "position": { "x": 650, "y": 50 },
      "data": {
        "label": "OpenSearch",
        "color": "#3b82f6",
        "description": "벡터 DB",
        "useCase": "시맨틱 검색",
        "config": {
          "indexName": "document-embeddings",
          "topK": 5
        }
      }
    },
    {
      "id": "node_vector_search",
      "type": "vector-search",
      "position": { "x": 250, "y": 200 },
      "data": {
        "label": "벡터 검색",
        "color": "#e9d5ff",
        "description": "k-NN",
        "useCase": "관련 문서 검색",
        "config": {
          "topK": 3,
          "threshold": 0.7
        }
      }
    },
    {
      "id": "node_prompt",
      "type": "prompt-template",
      "position": { "x": 450, "y": 200 },
      "data": {
        "label": "프롬프트",
        "color": "#06b6d4",
        "description": "템플릿",
        "useCase": "RAG 프롬프트 구성",
        "config": {
          "template": "다음 컨텍스트를 기반으로 질문에 답변하세요.\n\n컨텍스트:\n{{context}}\n\n질문: {{question}}\n\n답변:"
        }
      }
    },
    {
      "id": "node_guardrails",
      "type": "bedrock-guardrails",
      "position": { "x": 650, "y": 200 },
      "data": {
        "label": "Guardrails",
        "color": "#ef4444",
        "description": "콘텐츠 필터링",
        "useCase": "안전한 AI 응답",
        "provider": "Bedrock",
        "config": {
          "guardrailId": "my-guardrail-id",
          "version": "1",
          "contentFiltering": true,
          "topicFiltering": true
        }
      }
    },
    {
      "id": "node_claude",
      "type": "model-claude-3-5-sonnet",
      "position": { "x": 850, "y": 200 },
      "data": {
        "label": "Claude 3.5 Sonnet",
        "color": "#6366f1",
        "description": "최신 고성능 모델",
        "provider": "Anthropic",
        "useCase": "질문 답변 생성",
        "config": {
          "modelId": "anthropic.claude-3-5-sonnet-20240620-v1:0",
          "maxTokens": 2048,
          "temperature": 0.7
        }
      }
    },
    {
      "id": "node_output",
      "type": "output",
      "position": { "x": 1050, "y": 200 },
      "data": {
        "label": "출력",
        "color": "#ef4444",
        "description": "종료",
        "useCase": "답변 반환",
        "config": {}
      }
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "node_s3",
      "target": "node_textract",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    },
    {
      "id": "e2",
      "source": "node_textract",
      "target": "node_embedder",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    },
    {
      "id": "e3",
      "source": "node_embedder",
      "target": "node_opensearch",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    },
    {
      "id": "e4",
      "source": "node_input",
      "target": "node_vector_search",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    },
    {
      "id": "e5",
      "source": "node_opensearch",
      "target": "node_vector_search",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    },
    {
      "id": "e6",
      "source": "node_vector_search",
      "target": "node_prompt",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    },
    {
      "id": "e7",
      "source": "node_prompt",
      "target": "node_guardrails",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    },
    {
      "id": "e8",
      "source": "node_guardrails",
      "target": "node_claude",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    },
    {
      "id": "e9",
      "source": "node_claude",
      "target": "node_output",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    }
  ]
}
