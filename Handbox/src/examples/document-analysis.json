{
  "name": "문서 분석 및 시각화",
  "description": "PDF 문서를 분석하고 결과를 차트와 테이블로 시각화하는 워크플로우",
  "category": "분석",
  "nodes": [
    {
      "id": "node_pdf_load",
      "type": "data.file-loader",
      "position": { "x": 50, "y": 200 },
      "data": {
        "label": "PDF 로드",
        "color": "#3b82f6",
        "description": "PDF 문서 로드",
        "config": {
          "file_type": "pdf"
        }
      }
    },
    {
      "id": "node_preprocess",
      "type": "data.preprocessor",
      "position": { "x": 250, "y": 200 },
      "data": {
        "label": "텍스트 전처리",
        "color": "#8b5cf6",
        "description": "텍스트 정제 및 분할",
        "config": {
          "runtime": "javascript",
          "script": "// 텍스트 정제\nconst text = input.text || '';\nconst lines = text.split('\\n').filter(l => l.trim());\nreturn { text: lines.join('\\n'), line_count: lines.length };"
        }
      }
    },
    {
      "id": "node_analysis_prompt",
      "type": "prompt.template",
      "position": { "x": 450, "y": 100 },
      "data": {
        "label": "분석 프롬프트",
        "color": "#f59e0b",
        "description": "문서 분석 지시",
        "config": {
          "template": "다음 문서를 분석하고 핵심 내용을 JSON 형식으로 추출해주세요.\n\n문서 내용:\n{{text}}\n\n다음 형식으로 응답해주세요:\n{\n  \"summary\": \"문서 요약 (2-3문장)\",\n  \"key_topics\": [\"주제1\", \"주제2\", ...],\n  \"statistics\": {\n    \"word_count\": 숫자,\n    \"paragraph_count\": 숫자,\n    \"sentiment\": \"positive/neutral/negative\"\n  },\n  \"categories\": [\n    {\"name\": \"카테고리명\", \"count\": 숫자},\n    ...\n  ]\n}"
        }
      }
    },
    {
      "id": "node_llm",
      "type": "ai.llm-invoke",
      "position": { "x": 700, "y": 100 },
      "data": {
        "label": "Claude 분석",
        "color": "#6366f1",
        "description": "문서 내용 분석",
        "config": {
          "modelId": "anthropic.claude-3-5-sonnet-20240620-v1:0",
          "maxTokens": 2048,
          "temperature": 0.2
        }
      }
    },
    {
      "id": "node_chart",
      "type": "viz.chart",
      "position": { "x": 950, "y": 50 },
      "data": {
        "label": "카테고리 차트",
        "color": "#ec4899",
        "description": "카테고리별 분포",
        "config": {
          "chart_type": "pie",
          "title": "문서 카테고리 분포",
          "colors": ["#3b82f6", "#10b981", "#f59e0b", "#ec4899", "#8b5cf6"]
        }
      }
    },
    {
      "id": "node_table",
      "type": "viz.table",
      "position": { "x": 950, "y": 200 },
      "data": {
        "label": "분석 테이블",
        "color": "#06b6d4",
        "description": "상세 분석 결과",
        "config": {
          "show_headers": true,
          "striped": true
        }
      }
    },
    {
      "id": "node_stats",
      "type": "viz.stats",
      "position": { "x": 950, "y": 350 },
      "data": {
        "label": "통계 요약",
        "color": "#f59e0b",
        "description": "수치 통계",
        "config": {
          "show_distribution": true
        }
      }
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "node_pdf_load",
      "target": "node_preprocess",
      "animated": true,
      "style": { "stroke": "#8b5cf6", "strokeWidth": 2 }
    },
    {
      "id": "e2",
      "source": "node_preprocess",
      "target": "node_analysis_prompt",
      "animated": true,
      "style": { "stroke": "#f59e0b", "strokeWidth": 2 }
    },
    {
      "id": "e3",
      "source": "node_analysis_prompt",
      "target": "node_llm",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    },
    {
      "id": "e4",
      "source": "node_llm",
      "target": "node_chart",
      "animated": true,
      "style": { "stroke": "#ec4899", "strokeWidth": 2 }
    },
    {
      "id": "e5",
      "source": "node_llm",
      "target": "node_table",
      "animated": true,
      "style": { "stroke": "#06b6d4", "strokeWidth": 2 }
    },
    {
      "id": "e6",
      "source": "node_llm",
      "target": "node_stats",
      "animated": true,
      "style": { "stroke": "#f59e0b", "strokeWidth": 2 }
    }
  ]
}
