{
  "name": "이미지 분석 파이프라인",
  "description": "이미지에서 텍스트, 객체, 라벨을 추출하고 AI로 분석하는 워크플로우",
  "nodes": [
    {
      "id": "node_s3_images",
      "type": "aws-s3",
      "position": { "x": 50, "y": 150 },
      "data": {
        "label": "이미지 저장소",
        "color": "#3b82f6",
        "description": "S3 버킷",
        "config": {
          "bucket": "my-images-bucket",
          "prefix": "analysis/",
          "operation": "list"
        }
      }
    },
    {
      "id": "node_rekognition_labels",
      "type": "aws-rekognition",
      "position": { "x": 300, "y": 50 },
      "data": {
        "label": "객체 감지",
        "color": "#ff9900",
        "description": "라벨 추출",
        "config": {
          "feature": "LABELS",
          "max_labels": 20,
          "min_confidence": 70
        }
      }
    },
    {
      "id": "node_rekognition_text",
      "type": "aws-rekognition",
      "position": { "x": 300, "y": 200 },
      "data": {
        "label": "텍스트 감지",
        "color": "#ff9900",
        "description": "OCR",
        "config": {
          "feature": "TEXT"
        }
      }
    },
    {
      "id": "node_rekognition_faces",
      "type": "aws-rekognition",
      "position": { "x": 300, "y": 350 },
      "data": {
        "label": "얼굴 감지",
        "color": "#ff9900",
        "description": "표정 분석",
        "config": {
          "feature": "FACES",
          "attributes": ["ALL"]
        }
      }
    },
    {
      "id": "node_merge",
      "type": "merge",
      "position": { "x": 550, "y": 200 },
      "data": {
        "label": "분석 통합",
        "color": "#8b5cf6",
        "description": "결과 병합",
        "config": {}
      }
    },
    {
      "id": "node_analysis_prompt",
      "type": "prompt-template",
      "position": { "x": 750, "y": 200 },
      "data": {
        "label": "종합 분석",
        "color": "#06b6d4",
        "description": "AI 분석 요청",
        "config": {
          "template": "다음 이미지 분석 결과를 바탕으로 종합적인 이미지 설명과 인사이트를 제공해주세요.\n\n분석 결과:\n{{input}}\n\n다음 내용을 포함해주세요:\n1. 이미지 전체 설명\n2. 주요 객체 및 장면 해석\n3. 감지된 텍스트의 맥락\n4. 인물이 있다면 표정/감정 분석\n5. 이미지의 목적 또는 용도 추정"
        }
      }
    },
    {
      "id": "node_analyst",
      "type": "model-claude-3-5-sonnet",
      "position": { "x": 950, "y": 200 },
      "data": {
        "label": "이미지 분석가",
        "color": "#6366f1",
        "description": "종합 해석",
        "provider": "Anthropic",
        "config": {
          "system_prompt": "당신은 이미지 분석 전문가입니다. 컴퓨터 비전 분석 결과를 바탕으로 이미지에 대한 깊이 있는 해석을 제공합니다.",
          "temperature": 0.5,
          "max_tokens": 2048
        }
      }
    },
    {
      "id": "node_output",
      "type": "output",
      "position": { "x": 1150, "y": 200 },
      "data": {
        "label": "분석 결과",
        "color": "#ef4444",
        "description": "이미지 분석 리포트",
        "config": {
          "outputFormat": "markdown"
        }
      }
    }
  ],
  "edges": [
    { "id": "e1", "source": "node_s3_images", "target": "node_rekognition_labels", "animated": true, "style": { "stroke": "#6366f1", "strokeWidth": 2 } },
    { "id": "e2", "source": "node_s3_images", "target": "node_rekognition_text", "animated": true, "style": { "stroke": "#6366f1", "strokeWidth": 2 } },
    { "id": "e3", "source": "node_s3_images", "target": "node_rekognition_faces", "animated": true, "style": { "stroke": "#6366f1", "strokeWidth": 2 } },
    { "id": "e4", "source": "node_rekognition_labels", "target": "node_merge", "animated": true, "style": { "stroke": "#6366f1", "strokeWidth": 2 } },
    { "id": "e5", "source": "node_rekognition_text", "target": "node_merge", "animated": true, "style": { "stroke": "#6366f1", "strokeWidth": 2 } },
    { "id": "e6", "source": "node_rekognition_faces", "target": "node_merge", "animated": true, "style": { "stroke": "#6366f1", "strokeWidth": 2 } },
    { "id": "e7", "source": "node_merge", "target": "node_analysis_prompt", "animated": true, "style": { "stroke": "#6366f1", "strokeWidth": 2 } },
    { "id": "e8", "source": "node_analysis_prompt", "target": "node_analyst", "animated": true, "style": { "stroke": "#6366f1", "strokeWidth": 2 } },
    { "id": "e9", "source": "node_analyst", "target": "node_output", "animated": true, "style": { "stroke": "#6366f1", "strokeWidth": 2 } }
  ]
}
