{
  "name": "클라우드 RAG 파이프라인",
  "description": "AWS S3와 벡터DB를 활용한 클라우드 기반 RAG 워크플로우",
  "category": "RAG",
  "nodes": [
    {
      "id": "node_file_load",
      "type": "data.file-loader",
      "position": { "x": 50, "y": 100 },
      "data": {
        "label": "파일 로드",
        "color": "#3b82f6",
        "description": "문서 파일 로드",
        "config": {
          "file_type": "auto"
        }
      }
    },
    {
      "id": "node_cloud_storage",
      "type": "storage.unified",
      "position": { "x": 300, "y": 100 },
      "data": {
        "label": "클라우드 저장",
        "color": "#8b5cf6",
        "description": "S3 + 벡터DB 저장",
        "config": {
          "mode": "cloud-vector",
          "operation": "save",
          "collection": "documents",
          "auto_embed": true,
          "bucket": "handbox-rag",
          "region": "ap-northeast-2"
        }
      }
    },
    {
      "id": "node_query",
      "type": "io.local-file",
      "position": { "x": 50, "y": 300 },
      "data": {
        "label": "검색 쿼리",
        "color": "#22c55e",
        "description": "질문 입력",
        "config": {
          "inputType": "text",
          "placeholder": "검색할 질문을 입력하세요..."
        }
      }
    },
    {
      "id": "node_rag",
      "type": "rag.retriever",
      "position": { "x": 300, "y": 300 },
      "data": {
        "label": "벡터 검색",
        "color": "#06b6d4",
        "description": "OpenSearch 벡터 검색",
        "config": {
          "search_mode": "vector",
          "top_k": 5,
          "threshold": 0.75
        }
      }
    },
    {
      "id": "node_context",
      "type": "rag.context-builder",
      "position": { "x": 550, "y": 300 },
      "data": {
        "label": "컨텍스트 구성",
        "color": "#14b8a6",
        "description": "검색 결과 포맷팅",
        "config": {
          "max_context_tokens": 6000,
          "include_metadata": true,
          "format": "numbered"
        }
      }
    },
    {
      "id": "node_llm",
      "type": "ai.llm-invoke",
      "position": { "x": 800, "y": 300 },
      "data": {
        "label": "Claude 3.5",
        "color": "#6366f1",
        "description": "RAG 기반 답변",
        "config": {
          "modelId": "anthropic.claude-3-5-sonnet-20240620-v1:0",
          "maxTokens": 4096,
          "temperature": 0.3
        }
      }
    },
    {
      "id": "node_output",
      "type": "viz.result-viewer",
      "position": { "x": 1050, "y": 300 },
      "data": {
        "label": "결과",
        "color": "#10b981",
        "description": "답변 표시",
        "config": {}
      }
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "node_file_load",
      "target": "node_cloud_storage",
      "animated": true,
      "style": { "stroke": "#8b5cf6", "strokeWidth": 2 }
    },
    {
      "id": "e2",
      "source": "node_query",
      "target": "node_rag",
      "animated": true,
      "style": { "stroke": "#06b6d4", "strokeWidth": 2 }
    },
    {
      "id": "e3",
      "source": "node_rag",
      "target": "node_context",
      "animated": true,
      "style": { "stroke": "#06b6d4", "strokeWidth": 2 }
    },
    {
      "id": "e4",
      "source": "node_context",
      "target": "node_llm",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    },
    {
      "id": "e5",
      "source": "node_llm",
      "target": "node_output",
      "animated": true,
      "style": { "stroke": "#6366f1", "strokeWidth": 2 }
    }
  ]
}
