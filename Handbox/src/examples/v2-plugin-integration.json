{
  "version": "2.0.0",
  "id": "v2-plugin-integration",
  "meta": {
    "name": "Plugin Integration Pipeline",
    "description": "MCP 플러그인(Brave Search)으로 웹 검색 → 결과 정리 → LLM으로 종합 분석 → 결과 시각화. Tier 2 플러그인과 Tier 1/3 도구를 조합하는 통합 파이프라인.",
    "author": "Handbox",
    "tags": ["plugin", "mcp", "search", "brave", "integration", "tier2"],
    "category": "integration",
    "createdAt": "2026-02-20T00:00:00Z",
    "updatedAt": "2026-02-20T00:00:00Z"
  },
  "variables": [
    {
      "key": "search_query",
      "label": "검색 키워드",
      "type": "text",
      "default": "2026 AI technology trends",
      "description": "검색할 키워드"
    }
  ],
  "nodes": [
    {
      "id": "query_input",
      "type": "data.constant",
      "position": { "x": 50, "y": 200 },
      "data": {
        "label": "검색 키워드",
        "color": "#22c55e",
        "description": "검색할 키워드 입력",
        "config": {
          "value": "{{search_query}}",
          "type": "text"
        }
      }
    },
    {
      "id": "brave_search",
      "type": "plugin.brave-search.brave_web_search",
      "position": { "x": 300, "y": 200 },
      "data": {
        "label": "Brave 웹 검색",
        "color": "#ff6b35",
        "description": "[플러그인] Brave Search API로 웹 검색",
        "config": {
          "count": 10
        }
      }
    },
    {
      "id": "json_extract",
      "type": "transform.json-query",
      "position": { "x": 550, "y": 100 },
      "data": {
        "label": "검색 결과 추출",
        "color": "#8b5cf6",
        "description": "검색 결과에서 제목/URL/요약 추출",
        "config": {
          "query": "web.results[*].{title: title, url: url, description: description}"
        }
      }
    },
    {
      "id": "http_fetch",
      "type": "io.http-request",
      "position": { "x": 550, "y": 300 },
      "data": {
        "label": "상위 결과 가져오기",
        "color": "#3b82f6",
        "description": "검색 결과 상위 페이지 본문 가져오기",
        "config": {
          "method": "GET",
          "timeout_ms": 15000,
          "response_type": "text"
        }
      }
    },
    {
      "id": "merge_data",
      "type": "control.merge",
      "position": { "x": 800, "y": 200 },
      "data": {
        "label": "데이터 병합",
        "color": "#64748b",
        "description": "검색 메타데이터와 페이지 본문을 병합",
        "config": {
          "mode": "object",
          "keys": "search_results,page_content"
        }
      }
    },
    {
      "id": "analysis_prompt",
      "type": "prompt.template",
      "position": { "x": 1050, "y": 200 },
      "data": {
        "label": "분석 프롬프트",
        "color": "#ec4899",
        "description": "검색 결과를 종합 분석하는 프롬프트 구성",
        "config": {
          "template": "다음 웹 검색 결과를 종합 분석하여 리서치 보고서를 작성하세요.\n\n## 검색 키워드\n{{query}}\n\n## 검색 결과 요약\n{{#each search_results}}\n### {{this.title}}\n- URL: {{this.url}}\n- 설명: {{this.description}}\n{{/each}}\n\n## 페이지 본문 (상위 결과)\n{{page_content}}\n\n## 종합 분석 보고서\n1. 핵심 트렌드 (3-5개)\n2. 주요 발견\n3. 시사점\n4. 추가 리서치 필요 영역"
        }
      }
    },
    {
      "id": "llm_analyze",
      "type": "llm.chat",
      "position": { "x": 1300, "y": 200 },
      "data": {
        "label": "AI 종합 분석",
        "color": "#6366f1",
        "description": "LLM이 검색 결과를 종합 분석",
        "config": {
          "provider": "",
          "model": "",
          "temperature": 0.5,
          "maxTokens": 4096,
          "systemPrompt": "당신은 리서치 분석 전문가입니다. 웹 검색 결과를 종합 분석하여 체계적인 보고서를 작성하세요."
        }
      }
    },
    {
      "id": "result_text",
      "type": "viz.text",
      "position": { "x": 1550, "y": 100 },
      "data": {
        "label": "분석 보고서",
        "color": "#10b981",
        "description": "종합 분석 결과 표시",
        "config": {
          "title": "리서치 보고서"
        }
      }
    },
    {
      "id": "result_json",
      "type": "viz.json",
      "position": { "x": 1550, "y": 300 },
      "data": {
        "label": "검색 데이터",
        "color": "#10b981",
        "description": "원본 검색 결과 JSON 뷰어",
        "config": {
          "title": "검색 결과 원본 데이터",
          "expandDepth": 2
        }
      }
    }
  ],
  "edges": [
    { "id": "e1", "source": "query_input", "target": "brave_search", "sourceHandle": "output", "targetHandle": "query" },
    { "id": "e2", "source": "brave_search", "target": "json_extract", "sourceHandle": "result", "targetHandle": "data" },
    { "id": "e3", "source": "brave_search", "target": "http_fetch", "sourceHandle": "result", "targetHandle": "url" },
    { "id": "e4", "source": "json_extract", "target": "merge_data", "sourceHandle": "result", "targetHandle": "input_1" },
    { "id": "e5", "source": "http_fetch", "target": "merge_data", "sourceHandle": "body", "targetHandle": "input_2" },
    { "id": "e6", "source": "merge_data", "target": "analysis_prompt", "sourceHandle": "output", "targetHandle": "data" },
    { "id": "e7", "source": "query_input", "target": "analysis_prompt", "sourceHandle": "output", "targetHandle": "query" },
    { "id": "e8", "source": "analysis_prompt", "target": "llm_analyze", "sourceHandle": "text", "targetHandle": "prompt" },
    { "id": "e9", "source": "llm_analyze", "target": "result_text", "sourceHandle": "text", "targetHandle": "text" },
    { "id": "e10", "source": "merge_data", "target": "result_json", "sourceHandle": "output", "targetHandle": "data" }
  ]
}
